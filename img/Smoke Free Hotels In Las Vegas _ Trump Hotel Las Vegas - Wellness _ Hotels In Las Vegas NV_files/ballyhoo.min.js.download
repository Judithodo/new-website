!function(t,e){var i=function(t,i){this.elem=t,this.$elem=e(t),this.options=i,this._init()};i.prototype={defaults:{clientName:"Sabre Hospitality Solutions",holder:e(".media-gallery"),splitCategory:!0,dataSource:"",startCategory:"",splitMedia:!0,initialMedia:"photos",showInfo:!1,showTiles:!0,galleryName:"",startingIndex:0},_init:function(){if(this.config=e.extend({},this.defaults,this.options),console.log("_init",this.config),""===this.config.dataSource)throw new Error("Missing dataSource. Kind of need that...");if(""===this.config.galleryName)throw new Error("Missing Gallery Name");return this},_loadGallery:function(t){console.log("_loadGallery",t),"object"==typeof t.dataSource?e.startEngines(t,t.dataSource):e.when(e.ajax({url:t.dataSource,dataType:"json"})).then(function(i){console.log("_loadGallery data",i),e.cmsData(t,i)})},parseHash:function(){return _parseHash()},launch:function(t){var i=this.config;e.isEmptyObject(t)||e.each(t,function(t,e){i[t]=e}),this._loadGallery(i)}},i.defaults=i.prototype.defaults,e.fn.ballyhoo=function(t){return this.each(function(){new i(this,t)._init().launch()})},e.getAJAXData=function(t){e.getJSON(t.dataSource,function(t){dataholder=t})},e.cmsData=function(t,i){e.getJSON(t.dataSource,function(i,a){var o=i.success,r=i.records,n=[];o?(e.each(r,function(t,i){var a=i.content.imagelists[0],o=a["#name"];e.each(a.files,function(t,i){var a=[];if("Video"===i["#filetype"]?a.video=i["#url"]:(a.thumb=i["#url"],a.image=i["#url"]),a.title=i["#name"],a.description=i["#metadescription"],a.type="",a.category=o,e.isEmptyObject(i.cta)||(a.type=i.cta["#text"],a.cta={text:i.cta["#text"],title:i.cta["#title"],activeText:i.cta["#activeText"],link:i.cta["#link"],externalLink:""!==i.cta["#link"]}),!e.isEmptyObject(i.rooms))for(var t in a.type="Room",a.rate={cost:null!==i.rate.cost?i.rate.cost:"00.00",currency:i.rate.currency,roomCode:"",roomName:i.rooms["#name"]},i.rooms)void 0!==i.rooms[t]["@synxisid"]&&(a.rate.roomCode+=i.rooms[t]["@synxisid"]+",");n.push(a)})}),e.startEngines(t,n)):console.log(i.errors[0]["#message"])})},e.startEngines=function(t,i){var a="object"==typeof t.holder[0]?t.holder:e(".media-gallery"),o={};""!==t.startCategory?(o=e.grep(i,function(e,i){if(e.category.toLowerCase().split(",").indexOf(t.startCategory.toLowerCase())>-1){if(!t.splitMedia)return e;if(void 0!==e.video&&"videos"===t.initialMedia)return e;if(void 0===e.video&&"videos"!==t.initialMedia)return e}}),t.showTiles=!1):o=t.splitMedia?e.grep(i,function(e,i){return void 0!==e.video&&"videos"===t.initialMedia?e:void 0===e.video&&"videos"!==t.initialMedia?e:void 0}):i;var r=e.grep(i,function(t,e){if(t.video)return!0});a.addClass("show"),e.ajax({url:"/templates/main/js/templates/gallery-templates.html",cache:!0,success:function(e){a.find(".galleria").galleria({dataSource:o,show:parseInt(t.startingIndex),sabreConfig:{galleryName:t.galleryName,clientName:t.clientName,holder:t.holder,splitCategory:t.splitCategory,startCategory:t.startCategory,splitMedia:r,initialMedia:t.initialMedia,showInfo:t.showInfo,showTiles:t.showTiles,rawData:i,templates:e}})}})},t.Ballyhoo=i}(window,jQuery);var _parseHash=function(){var t={galleryName:"galleria",initialMedia:"photo",index:0,category:""},e=window.location.hash;if(void 0!==e){var i=/\#g\/*(\w*)\/*(\w*)\/*(\d*)\/*(\w*)/i.exec(e);void 0!==i[1]&&""!==i[1]&&(t.galleryName=i[1]),void 0!==i[2]&&""!==i[2]&&(t.initialMedia=i[2]),void 0!==i[3]&&""!==i[3]&&(t.startingIndex=i[3]),void 0!==i[4]&&""!==i[4]&&(t.startCategory=i[4])}return t};