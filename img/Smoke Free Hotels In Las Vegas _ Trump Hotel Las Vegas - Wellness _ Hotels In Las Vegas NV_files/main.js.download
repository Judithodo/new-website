"use strict";function setDatePicker(e){return($(e).hasClass("date-begin")||$(e).hasClass("date-end"))&&$(e).hasClass("update-blocks")?{minDate:setDates(e,1),maxDate:setDates(e,0),onClose:function(){getRange(e)}}:($(e).hasClass("date-begin")||$(e).hasClass("date-end"))&&$(e).hasClass("netbooker")?{minDate:setDates(e,1),maxDate:setDates(e,0),onSelect:function(){splitDates(e)}}:$(e).hasClass("date-begin")||$(e).hasClass("date-end")?{minDate:setDates(e,1),maxDate:setDates(e,0)}:void 0}function setDates(e,t){return $(e).hasClass("date-begin")&&!$(".date-end",$(e).parent().next()).length||$(e).hasClass("date-end")&&!$(".date-begin",$(e).parent().prev()).length?t?new Date:null:$(e).hasClass("date-begin")?t?new Date:$(".date-end",$(e).parent().next()).datepicker("getDate")?new Date($(".date-end",$(e).parent().next()).datepicker("getDate").getTime()-864e5):null:$(e).hasClass("date-end")?t?$(".date-begin",$(e).parent().prev()).datepicker("getDate")?new Date($(".date-begin",$(e).parent().prev()).datepicker("getDate").getTime()+864e5):"+1d":null:void 0}function splitDates(e){var t=$(e).hasClass("date-end")?$(".date-begin",$(e).parent().prev()).datepicker("getDate"):$(e).datepicker("getDate"),a=$(e).hasClass("date-end")?$(e).datepicker("getDate"):$(".date-end",$(e).parent().next()).datepicker("getDate");if($(e).hasClass("date-begin")&&($("#arriveMonth").val($.datepicker.formatDate("mm",$(e).datepicker("getDate"))),$("#arriveDay").val($.datepicker.formatDate("dd",$(e).datepicker("getDate"))),$("#arriveYear").val($.datepicker.formatDate("yy",$(e).datepicker("getDate")))),$(e).hasClass("date-end")&&($("#departMonth").val($.datepicker.formatDate("mm",$(e).datepicker("getDate"))),$("#departDay").val($.datepicker.formatDate("dd",$(e).datepicker("getDate"))),$("#departYear").val($.datepicker.formatDate("yy",$(e).datepicker("getDate")))),t&&a){var n=Math.ceil((a.getTime()-t.getTime())/864e5);$("#numberOfNights").val(n)}}function getRange(e){var t=$(e).parents("form"),a=$(e).hasClass("date-end")?$(".date-begin",$(e).parent().prev()).datepicker("getDate"):$(e).datepicker("getDate"),n=$(e).hasClass("date-end")?$(e).datepicker("getDate"):$(".date-end",$(e).parent().next()).datepicker("getDate");if(a&&n){var i=Math.ceil((n.getTime()-a.getTime())/864e5);$("#room-requirements").show(),createBlock(a,i,t),createMeeting(a,i,t)}}function createBlock(e,t,a){$("#block-details",a).remove();for(var n=$("<tbody />").attr("id","block-details"),i=0;i<=t;i++){var r=$.datepicker.formatDate("D, m/d",new Date(e.getFullYear(),e.getMonth(),e.getDate()+i));n.append('<tr>\n\t\t\t\t\t<th scope="row">'+r+'</th>\n\t\t\t\t\t<td><input type="text" class="textfield single" maxlength="5" value="0" id="single_rooms_day_'+(i+1)+'" name="room_block[day_'+(i+1)+'][single]" /></td>\n\t\t\t\t\t<td><input type="text" class="textfield dbl" maxlength="5" value="0" id="dbl_rooms_day_'+(i+1)+'" name="room_block[day_'+(i+1)+'][dbl]" /></td>\n\t\t\t\t\t<td><input type="text" class="textfield suite" maxlength="5" value="0" id="suite_rooms_day_'+(i+1)+'" name="room_block[day_'+(i+1)+'][suite]" /></td>\n\t\t\t\t\t<td><input type="text" class="textfield readonly day-total" readonly="readonly" value="0" id="day_'+(i+1)+'_total" name="room_block[day_'+(i+1)+'][total]" /></td>\n\t\t\t\t\t</tr>')}n.append('<tr><th scope="row">Room Total</th>\n\t\t<td><input type="text" class="textfield readonly" readonly="readonly" value="0" id="single_rooms_total" name="room_block[single][total]" /></td>\n\t\t<td><input type="text" class="textfield readonly" readonly="readonly" value="0" id="dbl_rooms_total" name="room_block[dbl][total]" /></td>\n\t\t<td><input type="text" class="textfield readonly" readonly="readonly" value="0" id="suite_rooms_total" name="room_block[suite][total]" /></td>\n\t\t<td><input type="text" class="textfield readonly" readonly="readonly" value="0" id="total_rooms" name="total_rooms" /></td>\n\t\t</tr>'),$("#block-requirements",a).append(n),$("td input:not(.readonly)",n).focus(function(){$(this).val().length&&$(this).data("num",$(this).val()),$(this).val("")}).blur(function(){var e=$(this).data("num");""==$(this).val()&&(e?$(this).val(e):$(this).val(0))}).change(function(){calcTotal(this)})}function createMeeting(e,t,a){$("#meeting-details",a).remove();for(var n=$("<tbody />").attr("id","meeting-details"),i=0;i<=t;i++){var r=$.datepicker.formatDate("D, m/d",new Date(e.getFullYear(),e.getMonth(),e.getDate()+i));n.append('<tr>\n\t\t\t<th scope="row">'+r+'</th>\n\t\t\t<td><select name="meeting_requirements[day_'+(i+1)+'][room_setup]">\n\t\t\t\t<option value="Classroom" name="meeting_requirements[day_'+(i+1)+'][room_setup]">Classroom</option>\n\t\t\t\t<option value="Boardroom" name="meeting_requirements[day_'+(i+1)+'][room_setup]">Boardroom</option>\n\t\t\t\t<option value="Theater" name="meeting_requirements[day_'+(i+1)+'][room_setup]">Theater</option>\n\t\t\t\t<option value="U-Shaped" name="meeting_requirements[day_'+(i+1)+'][room_setup]">U-Shaped</option>\n\t\t\t\t<option value="Hollow Sq." name="meeting_requirements[day_'+(i+1)+'][room_setup]">Hollow Sq.</option>\n\t\t\t\t<option value="Rounds" name="meeting_requirements[day_'+(i+1)+'][room_setup]">Rounds</option>\n\t\t\t\t<option value="Reception" name="meeting_requirements[day_'+(i+1)+'][room_setup]">Reception</option>\n\t\t\t\t</select></td>\n\t\t\t<td><input type="text" class="textfield" maxlength="5" id="breakout_rooms_day_'+(i+1)+'" name="meeting_requirements[day_'+(i+1)+'][breakout_rooms]" /></td>\n\t\t\t<td><input type="text" class="textfield" maxlength="5" id="breakout_people_day_'+(i+1)+'" name="meeting_requirements[day_'+(i+1)+'][breakout_people]" /></td>\n\t\t\t<td><select name="meeting_requirements[day_'+(i+1)+'][breakout_setup]">\n\t\t\t\t<option value="Classroom" name="meeting_requirements[day_'+(i+1)+'][breakout_setup]">Classroom</option>\n\t\t\t\t<option value="Boardroom" name="meeting_requirements[day_'+(i+1)+'][breakout_setup]">Boardroom</option>\n\t\t\t\t<option value="Theater" name="meeting_requirements[day_'+(i+1)+'][breakout_setup]">Theater</option>\n\t\t\t\t<option value="U-Shaped" name="meeting_requirements[day_'+(i+1)+'][breakout_setup]">U-Shaped</option>\n\t\t\t\t<option value="Hollow Sq." name="meeting_requirements[day_'+(i+1)+'][breakout_setup]">Hollow Sq.</option>\n\t\t\t\t<option value="Rounds" name="meeting_requirements[day_'+(i+1)+'][breakout_setup]">Rounds</option>\n\t\t\t\t<option value="Reception" name="meeting_requirements[day_'+(i+1)+'][breakout_setup]">Reception</option>\n\t\t\t\t</select></td>\n\t\t\t</tr>')}$("#meeting-requirements",a).append(n)}function calcTotal(e){var t=$(e).parents("tr"),a=$(e).parents("tbody"),n=sTotal=dTotal=suite=total=0;$("input:not(.readonly)",t).each(function(){n+=parseInt($(this).val(),10)}),$(".day-total",t).val(n),$(e).hasClass("single")&&($("input.single",a).each(function(){sTotal+=parseInt($(this).val(),10)}),$("#single_rooms_total",a).val(sTotal)),$(e).hasClass("dbl")&&($("input.dbl",a).each(function(){dTotal+=parseInt($(this).val(),10)}),$("#dbl_rooms_total",a).val(dTotal)),$(e).hasClass("suite")&&($("input.suite",a).each(function(){dTotal+=parseInt($(this).val(),10)}),$("#suite_rooms_total",a).val(dTotal)),$(".day-total",a).each(function(){total+=parseInt($(this).val(),10)}),$("#total_rooms",a).val(total)}function openPreview(e){window.open(e,"myWindow","width=750,height=520,left=100,top=100,toolbar=No,location=No,scrollbars=No,status=No,resizable=No,fullscreen=No"),document.getElementById("flashCallBox").value=e}function extractParamFromUri(e,t){if(e){var e=e.split("#")[0],a=e.split("?");if(1!=a.length){var n=decodeURI(a[1]);t+="=";for(var i,r=n.split("&"),o=0;i=r[o];++o)if(0===i.indexOf(t))return unescape(i.split("=")[1])}}}!function(e){e.ajaxSetup({xhrFields:{withCredentials:!0}}),e.fn.initializeForm=function(t){var a={calText:"Click to select a date",dateFormat:"mm/dd/yyyy"},n=(e.extend(a,t),function(){var t="t"+ +new Date,a=e('<a id="'+t+'" href="#"/>').css({top:"-999px",position:"absolute"}).appendTo("body"),n=e("<style>#"+t+"{font-size:10px;}#"+t+":focus{font-size:1px !important;}</style>").appendTo("head"),i="10px"!==a.focus().css("fontSize");return a.add(n).remove(),i}());return this.each(function(){var t=e(this);n||(e(".textfield").focus(function(){e(this).css({backgroundColor:"#fdfcfa"})}).blur(function(){e(this).css({backgroundColor:"#ffffff"})}),e(".required",t).each(function(){})),e("ul.checkboxgroup input.other",t).not(":radio, :checkbox").hide(),e("ul.checkboxgroup input:not(:text)",t).click(function(){e(".other",e(this).parents("ul")).siblings().removeClass("required").filter(":text").hide(),e(this).is(":checked")&&(e(".validation-error",e(this).parents("ul")).removeError(t),e(this).hasClass("other")&&e(this).siblings().addClass("required").show())}),e("div.select-other",t).hide(),e("select.select-other",t).change(function(){var a=e(this).parent().next();"--"==e(this).val()?a.show().children("label, input").addClass("required"):(a.hide().children().removeClass("required").find("input").val(""),e(".validation-error",a).removeError(t))})})},e.fn.formValidate=function(t){var a={errorStart:"A valid ",errorEnd:" is required."},n=e.extend(a,t);return this.each(function(){var t=e(this);e(".submit",t).click(function(){var a="";if(e(".validation-error",t).removeError(t),e(".required",t).each(function(){var n=!0;if(e(this).is(":input")){var i=e.trim(e(this).val());if(e(this).hasClass("email")){if(n=/^[a-z0-9_+.-]+\@(?:[a-z0-9-]+\.)+[a-z0-9]{2,4}$/i.test(i),e(this).hasClass("confirm-email")&&n){var r=e.trim(e(this).parents(".field").prev().children(".email").val());i!=r&&(n=!n)}}else i.replace(/(?:^\s+)|(?:\s+$)/g,"").length<1&&(n=!n)}else e(this).is("ul")&&(n=!1,e(":radio, :checkbox",this).each(function(){e(this).is(":checked")&&(n=!0)}));if(!n){if(t.hasClass("inline"))e(this).parents(".field").children("label").addClass("validation-error");else{var o=e("<img />").attr("src","/templates/main/images/icon-warning.gif").addClass("validation-error");e(this).is("ul")?e("li:first",this).append(o):e(this).parent().append(o)}""==a&&(a=e(this).attr("id"))}}),a.length){var i=e("#"+a).parents(".field").find("label:eq(0)");return alert(n.errorStart+i.html().replace(/[*:]/g,"")+n.errorEnd),e("#"+a).is("ul")?e("#"+a,t).find("label:eq(0)").focus():e("#"+a,t).focus(),!1}})})},e.fn.expand=function(t){var a={openText:"View Details",closeText:"Hide Details",longClass:".package-long"},n=e.extend(a,t);return this.each(function(){var t=e(this),a=e("<div />").addClass("toggle");e("<a />").attr("href","#").addClass("toggler").html(n.openText).appendTo(a).toggle(function(){e(n.longClass,t).slideDown("slow"),e(this).html(n.closeText).addClass("open")},function(){e(n.longClass,t).slideUp("slow"),e(this).html(n.openText).removeClass("open")});e(n.longClass,t).after(a).hide()})},e.fn.removeError=function(t){return this.each(function(){t.hasClass("inline")?e(this).removeClass("validation-error"):e(this).remove()})},e.fn.ajaxCalendar=function(t){var a=e("<div />").attr("id","overlay").css({width:e("#calendar-wrapper").width(),height:e("#calendar-wrapper").height(),opacity:.5});return a.prependTo("#calendar-wrapper"),e(this).eventPreview(),e(this).initializeSharing(),this.each(function(){e("#calendar-wrapper a").on("click",function(t){t.preventDefault(),a.fadeIn("fast"),url=this.href.split("?"),e.get("/ajax/event-calendar?"+url[1],{op:"cal"},function(t){e("#calendar-wrapper").html(t).prepend(a),a.css({height:e("#calendar-wrapper").height()})}),e.get("/ajax/event-calendar?"+url[1],{op:"list"},function(t){e("#events-wrapper").html(t),a.fadeOut("fast")})})})},e.fn.eventPreview=function(t){var a={hideDetails:"Hide Details",viewDetails:"View Details"},n=e.extend(a,t);return this.each(function(){e(".view-details",this).toggle(function(t){t.preventDefault();var a=e(this);e.getJSON(ROOTPATH+"ajax/event-calendar/"+this.id,function(e){var t=a.find("*").contents().filter(function(){return 3==this.nodeType});t.length?t.after(n.hideDetails).remove():a.html(n.hideDetails),a.parent().addClass("active").parents(".event").find(".event-description").hide().html(e.data.record.description).slideDown("slow",function(){})})},function(t){t.preventDefault();var a=e(this).find("*").contents().filter(function(){return 3==this.nodeType});a.length?a.after(n.viewDetails).remove():e(this).html(n.viewDetails),e(this).parent().removeClass("active").parent().find(".event-description").slideUp("slow",function(){e(this).html("")})})})},e.fn.postPreview=function(t){var a={hideDetails:"Hide Details",viewDetails:"Read More"},n=e.extend(a,t);return this.each(function(t,a){e(".post-icon",this).click(function(t){t.preventDefault(),e(".post-details a",a).trigger("click")}),e("a.posting-details",this).toggle(function(t){t.preventDefault();var a=e(this);e.getJSON("/blog-details/"+this.rel,function(e){var t=a.find("*").contents().filter(function(){return 3==this.nodeType});t.length?t.after(n.hideDetails).remove():a.html(n.hideDetails),a.parent().addClass("active").parents(".post").find(".post-description").hide().html(e.item_html).slideDown("slow")})},function(t){t.preventDefault();var a=e(this).find("*").contents().filter(function(){return 3==this.nodeType});a.length?a.after(n.viewDetails).remove():e(this).html(n.viewDetails),e(this).parent().removeClass("active").parents(".post").find(".post-description").slideUp("slow",function(){e(this).html("")})})})},e.fn.packagePreview=function(t){var a={hideDetails:"Hide Details",viewDetails:"View Details"},n=e.extend(a,t);return this.each(function(){e("a.package-details",this).toggle(function(t){t.preventDefault();var a=e(this);e.getJSON(ROOTPATH+"ajax/packagedata/"+this.rel,function(t){var i=a.find("*").contents().filter(function(){return 3==this.nodeType});i.length?i.after(n.hideDetails).remove():a.html(n.hideDetails),a.parent().addClass("active").parents(".package-wrapper").find(".package-long").hide().html(t.data.record.item_html).slideDown("slow",function(){e(this).parents(".package-wrapper").find(".share").show()})})},function(t){t.preventDefault(),e(this).parents(".package-wrapper").find(".share").hide();var a=e(this).find("*").contents().filter(function(){return 3==this.nodeType});a.length?a.after(n.viewDetails).remove():e(this).html(n.viewDetails),e(this).parent().removeClass("active").parent().find(".package-long").slideUp("slow",function(){e(this).html("")})})})},e.fn.initializeSharing=function(){return this.each(function(){e(".share-link").on("click",function(t){t.preventDefault(),e(".share-panel").hide(),e(this).parents(".rss-item").find(".share-panel").css("display","inline")}),e(".share-close").on("click",function(t){t.preventDefault(),e(this).parents(".rss-item").find(".share-panel").slideUp("fast")})})},e.fn.initializeFollowing=function(){return this.each(function(){e(".follow-link").click(function(t){t.preventDefault(),e(".follow-panel").hide(),e(this).siblings(".follow-panel").css("display","inline")}),e(".follow-close").click(function(t){t.preventDefault(),e(this).parent(".follow-panel").slideUp("fast")})})}}(jQuery);